<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Vox Â· Task Radar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #020617;
      --bg-elevated: #020617;
      --bg-card: #020617;
      --accent: #f97316;
      --accent-soft: rgba(248, 171, 88, 0.18);
      --accent-strong: rgba(248, 171, 88, 0.4);
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --border-subtle: #1f2937;
      --danger: #f97373;
      --success: #22c55e;
      --pillar-radius: 18px;
      --shadow-soft: 0 22px 60px rgba(15, 23, 42, 0.75);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
    }

    body {
      min-height: 100vh;
      padding: 16px;
      display: flex;
      justify-content: center;
      background:
        radial-gradient(circle at top left, #111827 0, transparent 55%),
        radial-gradient(circle at top right, #0b1120 0, #020617 55%);
      color: var(--text-main);
    }

    .app {
      width: 100%;
      max-width: 1200px;
    }

    .top-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      gap: 8px;
      flex-wrap: wrap;
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .nav-links {
      display: inline-flex;
      gap: 8px;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.85);
      border: 1px solid rgba(31, 41, 55, 0.9);
    }

    .nav-links a {
      color: var(--text-muted);
      text-decoration: none;
      padding: 2px 8px;
      border-radius: 999px;
      transition: background 0.16s, color 0.16s;
    }

    .nav-links a.active,
    .nav-links a:hover {
      background: rgba(248, 171, 88, 0.18);
      color: var(--text-main);
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 16px;
      margin-bottom: 16px;
      flex-wrap: wrap;
    }

    .head-left h1 {
      font-size: 1.3rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--text-muted);
      margin-bottom: 4px;
    }

    .head-left h2 {
      font-size: 1.9rem;
      font-weight: 700;
      display: flex;
      flex-wrap: wrap;
      align-items: baseline;
      gap: 8px;
    }

    .pill-main {
      font-size: 0.78rem;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(248, 171, 88, 0.45);
      background: linear-gradient(90deg, rgba(248, 171, 88, 0.15), transparent);
      color: #fed7aa;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .head-right {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 6px;
      min-width: 190px;
    }

    .status-chip {
      padding: 8px 14px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.96);
      border: 1px solid var(--border-subtle);
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.82rem;
      color: var(--text-muted);
    }

    .status-dot {
      width: 9px;
      height: 9px;
      border-radius: 999px;
      background: var(--accent);
      box-shadow: 0 0 6px var(--accent);
    }

    .status-meta {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 2.3fr) minmax(0, 1.2fr);
      gap: 16px;
    }

    @media (max-width: 900px) {
      .layout {
        grid-template-columns: 1fr;
      }
      .head-right {
        align-items: flex-start;
      }
    }

    .card {
      position: relative;
      padding: 16px 18px;
      border-radius: var(--pillar-radius);
      border: 1px solid var(--border-subtle);
      background:
        radial-gradient(circle at top right, rgba(248, 171, 88, 0.16), transparent 55%),
        radial-gradient(circle at bottom left, rgba(15, 23, 42, 0.8), #020617);
      box-shadow: var(--shadow-soft);
      overflow: hidden;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: -140px;
      background: radial-gradient(circle at top, var(--accent-strong), transparent);
      opacity: 0.12;
      pointer-events: none;
    }

    .card-header {
      position: relative;
      z-index: 1;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      margin-bottom: 10px;
    }

    .card-header h3 {
      font-size: 1.02rem;
      font-weight: 600;
    }

    .card-header span {
      font-size: 0.78rem;
      color: var(--text-muted);
    }

    .mini-pill {
      padding: 3px 10px;
      border-radius: 999px;
      border: 1px solid rgba(75, 85, 99, 0.75);
      font-size: 0.75rem;
      color: var(--text-muted);
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: rgba(15, 23, 42, 0.96);
    }

    .columns {
      position: relative;
      z-index: 1;
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 10px;
    }

    @media (max-width: 960px) {
      .columns {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    @media (max-width: 640px) {
      .columns {
        grid-template-columns: 1fr;
      }
    }

    .column {
      border-radius: 16px;
      background: rgba(15, 23, 42, 0.97);
      border: 1px solid rgba(31, 41, 55, 0.95);
      padding: 10px 10px 8px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      max-height: 420px;
      overflow-y: auto;
    }

    .column-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 4px;
    }

    .column-title {
      font-size: 0.78rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .column-count {
      width: 20px;
      height: 20px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.96);
      border: 1px solid rgba(75, 85, 99, 0.9);
      font-size: 0.72rem;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-muted);
    }

    .column.proposed .column-title span.status-dot-small { background: #64748b; }
    .column.progress .column-title span.status-dot-small { background: #f97316; }
    .column.blocked .column-title span.status-dot-small { background: #f97373; }
    .column.done .column-title span.status-dot-small { background: #22c55e; }

    .status-dot-small {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #64748b;
    }

    .task-card {
      border-radius: 12px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: radial-gradient(circle at top left, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 0.9));
      padding: 8px 9px;
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 0.8rem;
      transition: border-color 0.18s, background 0.18s, transform 0.1s;
      cursor: default;
    }

    .task-card:hover {
      border-color: rgba(248, 171, 88, 0.85);
      background: radial-gradient(circle at top left, rgba(15, 23, 42, 1), rgba(15, 23, 42, 0.96));
      transform: translateY(-1px);
    }

    .task-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
    }

    .task-title {
      font-size: 0.86rem;
      font-weight: 500;
    }

    .task-badge {
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      font-size: 0.7rem;
      color: var(--text-muted);
      white-space: nowrap;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .task-badge.priority-high {
      border-color: rgba(248, 113, 113, 0.8);
      color: #fecaca;
    }

    .task-badge.priority-medium {
      border-color: rgba(234, 179, 8, 0.7);
      color: #facc15;
    }

    .task-badge.priority-low {
      border-color: rgba(56, 189, 248, 0.7);
      color: #7dd3fc;
    }

    .task-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      color: var(--text-muted);
      font-size: 0.74rem;
    }

    .tag {
      padding: 2px 6px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.96);
      border: 1px solid rgba(55, 65, 81, 0.9);
    }

    .task-desc {
      font-size: 0.76rem;
      color: #cbd5f5;
      margin-top: 2px;
    }

    .task-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 2px;
      font-size: 0.72rem;
      color: var(--text-muted);
      gap: 6px;
      flex-wrap: wrap;
    }

    .task-link {
      color: #93c5fd;
      text-decoration: none;
    }

    .task-link:hover {
      text-decoration: underline;
    }

    .stats-grid {
      position: relative;
      z-index: 1;
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 10px;
      margin-top: 2px;
    }

    @media (max-width: 720px) {
      .stats-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    .stat-card {
      border-radius: 14px;
      background: rgba(15, 23, 42, 0.96);
      border: 1px solid rgba(31, 41, 55, 0.95);
      padding: 10px 11px;
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .stat-label {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .stat-value {
      font-size: 1.1rem;
      font-weight: 600;
    }

    .stat-sub {
      font-size: 0.7rem;
      color: var(--text-muted);
    }

    .progress-bar {
      margin-top: 4px;
      position: relative;
      height: 6px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 1);
      overflow: hidden;
    }

    .progress-fill {
      position: absolute;
      inset: 0;
      border-radius: inherit;
      background: linear-gradient(90deg, var(--accent), #22c55e);
      width: 0%;
      transition: width 0.18s ease-out;
    }

    .legend {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      font-size: 0.72rem;
      color: var(--text-muted);
    }

    .legend-item {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 3px 7px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.96);
      border: 1px dashed rgba(55, 65, 81, 0.9);
    }

    .legend-swatch {
      width: 10px;
      height: 10px;
      border-radius: 999px;
    }

    ::-webkit-scrollbar {
      width: 6px;
    }
    ::-webkit-scrollbar-track {
      background: transparent;
    }
    ::-webkit-scrollbar-thumb {
      background: rgba(30, 64, 175, 0.7);
      border-radius: 999px;
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="top-nav">
      <div>Vox Â· Mass Code tools</div>
      <div class="nav-links">
        <a href="index.html">Habits</a>
        <a href="tasks.html" class="active">Tasks</a>
      </div>
    </div>

    <header>
      <div class="head-left">
        <h1>MASS CODE OPS</h1>
        <h2>
          Vox Task Radar
          <span class="pill-main">Live map of what I'm doing for you</span>
        </h2>
      </div>
      <div class="head-right">
        <div class="status-chip">
          <span class="status-dot"></span>
          <div>
            <div id="status-summary">â€”</div>
            <div class="status-meta" id="status-meta">â€”</div>
          </div>
        </div>
        <div class="mini-pill" id="last-sync-pill">
          <span>Last update: <span id="last-sync"></span></span>
        </div>
      </div>
    </header>

    <div class="layout">
      <section class="card">
        <div class="card-header">
          <div>
            <h3>Task pipeline</h3>
            <span>From proposed to shipped Â· updated by Vox</span>
          </div>
          <span class="mini-pill">
            <span id="count-total">0</span>
            <span>total tasks</span>
          </span>
        </div>

        <div class="columns">
          <div class="column proposed" data-column="proposed">
            <div class="column-header">
              <div class="column-title">
                <span class="status-dot-small"></span>
                <span>Proposed</span>
              </div>
              <div class="column-count" id="count-proposed">0</div>
            </div>
            <div class="column-body" id="column-proposed"></div>
          </div>

          <div class="column progress" data-column="in-progress">
            <div class="column-header">
              <div class="column-title">
                <span class="status-dot-small"></span>
                <span>In progress</span>
              </div>
              <div class="column-count" id="count-progress">0</div>
            </div>
            <div class="column-body" id="column-in-progress"></div>
          </div>

          <div class="column blocked" data-column="blocked">
            <div class="column-header">
              <div class="column-title">
                <span class="status-dot-small"></span>
                <span>Blocked</span>
              </div>
              <div class="column-count" id="count-blocked">0</div>
            </div>
            <div class="column-body" id="column-blocked"></div>
          </div>

          <div class="column done" data-column="done">
            <div class="column-header">
              <div class="column-title">
                <span class="status-dot-small"></span>
                <span>Done</span>
              </div>
              <div class="column-count" id="count-done">0</div>
            </div>
            <div class="column-body" id="column-done"></div>
          </div>
        </div>
      </section>

      <section class="card">
        <div class="card-header">
          <div>
            <h3>Ops summary</h3>
            <span>How loaded I am and where attention sits</span>
          </div>
        </div>

        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-label">Completion rate</div>
            <div class="stat-value" id="stat-completion">0%</div>
            <div class="stat-sub" id="stat-completion-sub">No tasks yet</div>
            <div class="progress-bar">
              <div class="progress-fill" id="fill-completion"></div>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-label">Focus area</div>
            <div class="stat-value" id="stat-focus">â€”</div>
            <div class="stat-sub" id="stat-focus-sub">Where most active work is</div>
          </div>

          <div class="stat-card">
            <div class="stat-label">Current load</div>
            <div class="stat-value" id="stat-load">0 active</div>
            <div class="stat-sub" id="stat-load-sub">In progress + blocked</div>
          </div>
        </div>

        <div class="legend" id="legend"></div>
      </section>
    </div>
  </div>

  <script>
    // ---- Data model -----------------------------------------------------
    // area: business | physique | content | personal | infra
    // status: proposed | in-progress | blocked | done
    // priority: low | medium | high

    const TASK_DATA = {
      lastUpdated: "2026-02-14T00:55:00+08:00",
      tasks: [
        {
          id: "habit-dashboard",
          title: "Habit tracker dashboard (Mass Code System)",
          area: "physique",
          status: "done",
          priority: "high",
          description: "Build and host a weekly habit dashboard with streaks and completion stats, accessible from any device.",
          link: "index.html",
          lastUpdated: "2026-02-14",
        },
        {
          id: "task-radar",
          title: "Public task radar dashboard",
          area: "infra",
          status: "in-progress",
          priority: "high",
          description: "Create this live task view so you can see what I'm working on, what's blocked, and what's done.",
          link: "tasks.html",
          lastUpdated: "2026-02-14",
        },
        {
          id: "yt-review",
          title: "YouTube content review system",
          area: "content",
          status: "proposed",
          priority: "medium",
          description: "Define a repeatable checklist to review new Mass Code videos (hook, pacing, retention risk, CTAs).",
          link: "",
          lastUpdated: "2026-02-14",
        },
        {
          id: "whoop-path",
          title: "Trackers & data stack (Whoop / alternatives)",
          area: "physique",
          status: "proposed",
          priority: "medium",
          description: "Map the practical path to get highâ€‘quality recovery and training data in Bali (Whoop or best alternative).",
          link: "",
          lastUpdated: "2026-02-14",
        },
        {
          id: "ops-automation",
          title: "Git + VPS workflow automation",
          area: "infra",
          status: "in-progress",
          priority: "medium",
          description: "Make it so you can just send repo links and I handle cloning, editing, committing, and pushing from the VPS.",
          link: "",
          lastUpdated: "2026-02-14",
        },
      ],
    };

    // ---- Helpers --------------------------------------------------------

    const areaLabels = {
      business: "Business",
      physique: "Physique",
      content: "Content",
      personal: "Personal",
      infra: "Infra / Systems",
    };

    const areaColors = {
      business: "#22c55e",
      physique: "#0ea5e9",
      content: "#a855f7",
      personal: "#f97373",
      infra: "#eab308",
    };

    function formatLastUpdated(iso) {
      if (!iso) return "â€”";
      try {
        const d = new Date(iso);
        return d.toLocaleString(undefined, {
          day: "2-digit",
          month: "short",
          hour: "2-digit",
          minute: "2-digit",
        });
      } catch (e) {
        return iso;
      }
    }

    function capitalise(s) {
      return s ? s.charAt(0).toUpperCase() + s.slice(1) : s;
    }

    // ---- Rendering ------------------------------------------------------

    function renderTasks() {
      const tasks = TASK_DATA.tasks || [];

      const cols = {
        "proposed": document.getElementById("column-proposed"),
        "in-progress": document.getElementById("column-in-progress"),
        "blocked": document.getElementById("column-blocked"),
        "done": document.getElementById("column-done"),
      };

      Object.values(cols).forEach((el) => (el.innerHTML = ""));

      const counts = { proposed: 0, "in-progress": 0, blocked: 0, done: 0 };

      for (const task of tasks) {
        const colEl = cols[task.status];
        if (!colEl) continue;
        counts[task.status]++;

        const card = document.createElement("article");
        card.className = "task-card";

        const top = document.createElement("div");
        top.className = "task-top";

        const titleEl = document.createElement("div");
        titleEl.className = "task-title";
        titleEl.textContent = task.title;

        const badge = document.createElement("div");
        badge.className = `task-badge priority-${task.priority}`;
        badge.innerHTML =
          task.priority === "high"
            ? "ðŸ”¥ High"
            : task.priority === "medium"
            ? "âš¡ Medium"
            : "Low";

        top.appendChild(titleEl);
        top.appendChild(badge);
        card.appendChild(top);

        const meta = document.createElement("div");
        meta.className = "task-meta";

        const areaTag = document.createElement("span");
        areaTag.className = "tag";
        const areaName = areaLabels[task.area] || task.area;
        areaTag.textContent = areaName;
        meta.appendChild(areaTag);

        const statusTag = document.createElement("span");
        statusTag.className = "tag";
        statusTag.textContent = capitalise(task.status.replace("-", " "));
        meta.appendChild(statusTag);

        card.appendChild(meta);

        if (task.description) {
          const desc = document.createElement("p");
          desc.className = "task-desc";
          desc.textContent = task.description;
          card.appendChild(desc);
        }

        const footer = document.createElement("div");
        footer.className = "task-footer";

        const dateSpan = document.createElement("span");
        dateSpan.textContent = task.lastUpdated
          ? `Updated ${task.lastUpdated}`
          : "";

        footer.appendChild(dateSpan);

        if (task.link) {
          const link = document.createElement("a");
          link.className = "task-link";
          link.href = task.link;
          link.textContent = "Open";
          footer.appendChild(link);
        }

        card.appendChild(footer);

        colEl.appendChild(card);
      }

      document.getElementById("count-proposed").textContent = counts["proposed"];
      document.getElementById("count-progress").textContent = counts["in-progress"];
      document.getElementById("count-blocked").textContent = counts["blocked"];
      document.getElementById("count-done").textContent = counts["done"];
      document.getElementById("count-total").textContent = tasks.length.toString();

      renderStats(tasks, counts);
    }

    function renderStats(tasks, counts) {
      const total = tasks.length;
      const done = counts.done || 0;
      const inProgress = counts["in-progress"] || 0;
      const blocked = counts.blocked || 0;

      const completionPct = total > 0 ? Math.round((done / total) * 100) : 0;
      document.getElementById("stat-completion").textContent = `${completionPct}%`;
      document.getElementById("fill-completion").style.width = `${completionPct}%`;
      document.getElementById("stat-completion-sub").textContent =
        total === 0
          ? "No tasks yet"
          : `${done}/${total} tasks closed`;

      const focusArea = computeFocusArea(tasks);
      document.getElementById("stat-focus").textContent = focusArea
        ? areaLabels[focusArea]
        : "â€”";
      document.getElementById("stat-focus-sub").textContent = focusArea
        ? "Most active work right now"
        : "Work is spread or empty";

      const active = inProgress + blocked;
      document.getElementById("stat-load").textContent = `${active} active`;
      document.getElementById("stat-load-sub").textContent =
        active === 0
          ? "Pipeline is clear"
          : "In progress + blocked";

      const statusSummary = document.getElementById("status-summary");
      const statusMeta = document.getElementById("status-meta");

      if (active === 0 && total > 0) {
        statusSummary.textContent = "Nothing in flight Â· ready for new work";
      } else if (blocked > 0) {
        statusSummary.textContent = `Blocked on ${blocked} task${
          blocked === 1 ? "" : "s"
        }`;
      } else if (inProgress > 0) {
        statusSummary.textContent = `Working on ${inProgress} task${
          inProgress === 1 ? "" : "s"
        }`;
      } else if (total === 0) {
        statusSummary.textContent = "No tasks loaded yet";
      }

      statusMeta.textContent = total
        ? `${done} done Â· ${inProgress} in progress Â· ${blocked} blocked`
        : "Once we define tasks, they show up here";

      const legendEl = document.getElementById("legend");
      legendEl.innerHTML = "";

      const areaCounts = {};
      for (const t of tasks) {
        if (!t.area) continue;
        areaCounts[t.area] = (areaCounts[t.area] || 0) + 1;
      }

      for (const [area, count] of Object.entries(areaCounts)) {
        const item = document.createElement("div");
        item.className = "legend-item";
        const sw = document.createElement("span");
        sw.className = "legend-swatch";
        sw.style.background = areaColors[area] || "#64748b";
        const label = document.createElement("span");
        label.textContent = `${areaLabels[area] || area}: ${count}`;
        item.appendChild(sw);
        item.appendChild(label);
        legendEl.appendChild(item);
      }

      document.getElementById("last-sync").textContent = formatLastUpdated(
        TASK_DATA.lastUpdated
      );
    }

    function computeFocusArea(tasks) {
      const focusScores = {};
      const weights = { high: 3, medium: 2, low: 1 };

      for (const t of tasks) {
        if (!t.area) continue;
        const w = weights[t.priority] || 1;
        const s = t.status;
        let multiplier = 0;
        if (s === "in-progress") multiplier = 1.4;
        else if (s === "blocked") multiplier = 1.2;
        else if (s === "proposed") multiplier = 0.6;
        else if (s === "done") multiplier = 0.4;
        focusScores[t.area] = (focusScores[t.area] || 0) + w * multiplier;
      }

      let bestArea = null;
      let bestScore = 0;
      for (const [area, score] of Object.entries(focusScores)) {
        if (score > bestScore) {
          bestScore = score;
          bestArea = area;
        }
      }
      return bestArea;
    }

    document.addEventListener("DOMContentLoaded", () => {
      renderTasks();
    });
  </script>
</body>
</html>
